{"ast":null,"code":"import React,{useState,useCallback,useMemo}from\"react\";import{GoogleMap,Marker,LoadScript,StandaloneSearchBox,DirectionsService,DirectionsRenderer}from\"@react-google-maps/api\";import{Card,CardContent,CardFooter}from\"@/components/ui/card\";import{Input}from\"@/components/ui/input\";import{Button}from\"@/components/ui/button\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Maps=()=>{const[map,setMap]=useState();const[searchBoxA,setSearchBoxA]=useState();const[searchBoxB,setSearchBoxB]=useState();const[targetA,settargetA]=useState();const[targetB,settargetB]=useState();const[origin,setOrigin]=useState(null);const[destination,setDestination]=useState(null);const[response,setResponse]=useState(null);//Posição inicial do mapa estação barra funda\nconst position={lat:-23.525505,lng:-46.667358};const onMapLoad=map=>{setMap(map);};const onLoadA=ref=>{setSearchBoxA(ref);};const onLoadB=ref=>{setSearchBoxB(ref);};const onPlacesChangedA=()=>{var _place$geometry,_place$geometry$locat,_place$geometry2,_place$geometry2$loca;const places=searchBoxA.getPlaces();console.log(places);const place=places[0];const location={lat:(place===null||place===void 0?void 0:(_place$geometry=place.geometry)===null||_place$geometry===void 0?void 0:(_place$geometry$locat=_place$geometry.location)===null||_place$geometry$locat===void 0?void 0:_place$geometry$locat.lat())||0,lng:(place===null||place===void 0?void 0:(_place$geometry2=place.geometry)===null||_place$geometry2===void 0?void 0:(_place$geometry2$loca=_place$geometry2.location)===null||_place$geometry2$loca===void 0?void 0:_place$geometry2$loca.lng())||0};settargetA(location);setOrigin(null);setDestination(null);setResponse(null);map===null||map===void 0?void 0:map.panTo(location);};const onPlacesChangedB=()=>{var _place$geometry3,_place$geometry3$loca,_place$geometry4,_place$geometry4$loca;const places=searchBoxB.getPlaces();console.log(places);const place=places[0];const location={lat:(place===null||place===void 0?void 0:(_place$geometry3=place.geometry)===null||_place$geometry3===void 0?void 0:(_place$geometry3$loca=_place$geometry3.location)===null||_place$geometry3$loca===void 0?void 0:_place$geometry3$loca.lat())||0,lng:(place===null||place===void 0?void 0:(_place$geometry4=place.geometry)===null||_place$geometry4===void 0?void 0:(_place$geometry4$loca=_place$geometry4.location)===null||_place$geometry4$loca===void 0?void 0:_place$geometry4$loca.lng())||0};settargetB(location);setOrigin(null);setDestination(null);setResponse(null);map===null||map===void 0?void 0:map.panTo(location);};const traceRoute=()=>{if(targetA&&targetB){setOrigin(targetA);setDestination(targetB);}};const directionsServiceOptions=// @ts-ignore\nuseMemo(()=>{return{origin,destination,travelMode:\"DRIVING\"};},[origin,destination]);const directionsCallback=useCallback(res=>{if(res!==null&&res.status===\"OK\"){setResponse(res);}else{console.log(res);}},[]);const directionsRendererOptions=useMemo(()=>{return{directions:response};},[response]);return/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full\",children:/*#__PURE__*/_jsx(LoadScript,{googleMapsApiKey:\"AIzaSyDmyOn9q7XLenV8V4onkqT2tXlpYuadgjw\",libraries:[\"places\"],children:/*#__PURE__*/_jsxs(GoogleMap,{onLoad:onMapLoad,mapContainerStyle:{width:\"100%\",height:\"100%\"},center:position,zoom:15,children:[/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid w-full items-center gap-4\",children:[/*#__PURE__*/_jsx(StandaloneSearchBox,{onLoad:onLoadA,onPlacesChanged:onPlacesChangedA,children:/*#__PURE__*/_jsx(Input,{placeholder:\"Digite o endere\\xE7o inicial\"})}),/*#__PURE__*/_jsx(StandaloneSearchBox,{onLoad:onLoadB,onPlacesChanged:onPlacesChangedB,children:/*#__PURE__*/_jsx(Input,{placeholder:\"Digite o endere\\xE7o final\"})})]}),/*#__PURE__*/_jsx(CardFooter,{className:\"justify-end\",children:/*#__PURE__*/_jsx(Button,{onClick:traceRoute,children:\"Tra\\xE7ar rota\"})})]})}),!response&&targetA&&/*#__PURE__*/_jsx(Marker,{position:targetA}),!response&&targetB&&/*#__PURE__*/_jsx(Marker,{position:targetB}),origin&&destination&&/*#__PURE__*/_jsx(DirectionsService,{options:directionsServiceOptions,callback:directionsCallback}),response&&directionsRendererOptions&&/*#__PURE__*/_jsx(DirectionsRenderer,{options:directionsRendererOptions})]})})});};export default Maps;","map":{"version":3,"names":["React","useState","useCallback","useMemo","GoogleMap","Marker","LoadScript","StandaloneSearchBox","DirectionsService","DirectionsRenderer","Card","CardContent","CardFooter","Input","Button","jsx","_jsx","jsxs","_jsxs","Maps","map","setMap","searchBoxA","setSearchBoxA","searchBoxB","setSearchBoxB","targetA","settargetA","targetB","settargetB","origin","setOrigin","destination","setDestination","response","setResponse","position","lat","lng","onMapLoad","onLoadA","ref","onLoadB","onPlacesChangedA","_place$geometry","_place$geometry$locat","_place$geometry2","_place$geometry2$loca","places","getPlaces","console","log","place","location","geometry","panTo","onPlacesChangedB","_place$geometry3","_place$geometry3$loca","_place$geometry4","_place$geometry4$loca","traceRoute","directionsServiceOptions","travelMode","directionsCallback","res","status","directionsRendererOptions","directions","className","children","googleMapsApiKey","libraries","onLoad","mapContainerStyle","width","height","center","zoom","onPlacesChanged","placeholder","onClick","options","callback"],"sources":["D:/apps/delivery-google-maps/client/src/pages/Maps.tsx"],"sourcesContent":["import React, { useState, useCallback, useMemo } from \"react\";\r\nimport {\r\n  GoogleMap,\r\n  Marker,\r\n  LoadScript,\r\n  StandaloneSearchBox,\r\n  DirectionsService,\r\n  DirectionsRenderer,\r\n} from \"@react-google-maps/api\";\r\nimport { Card, CardContent, CardFooter } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\nexport interface MapsProps {}\r\n\r\nconst Maps = () => {\r\n  const [map, setMap] = useState<google.maps.Map>();\r\n  const [searchBoxA, setSearchBoxA] = useState<google.maps.places.SearchBox>();\r\n  const [searchBoxB, setSearchBoxB] = useState<google.maps.places.SearchBox>();\r\n  const [targetA, settargetA] = useState<google.maps.LatLngLiteral>();\r\n  const [targetB, settargetB] = useState<google.maps.LatLngLiteral>();\r\n\r\n  const [origin, setOrigin] = useState<google.maps.LatLngLiteral | null>(null);\r\n  const [destination, setDestination] =\r\n    useState<google.maps.LatLngLiteral | null>(null);\r\n\r\n  const [response, setResponse] =\r\n    useState<google.maps.DistanceMatrixResponse | null>(null);\r\n\r\n  //Posição inicial do mapa estação barra funda\r\n  const position = {\r\n    lat: -23.525505,\r\n    lng: -46.667358,\r\n  };\r\n\r\n  const onMapLoad = (map: google.maps.Map) => {\r\n    setMap(map);\r\n  };\r\n\r\n  const onLoadA = (ref: google.maps.places.SearchBox) => {\r\n    setSearchBoxA(ref);\r\n  };\r\n\r\n  const onLoadB = (ref: google.maps.places.SearchBox) => {\r\n    setSearchBoxB(ref);\r\n  };\r\n\r\n  const onPlacesChangedA = () => {\r\n    const places = searchBoxA!.getPlaces();\r\n    console.log(places);\r\n    const place = places![0];\r\n    const location = {\r\n      lat: place?.geometry?.location?.lat() || 0,\r\n      lng: place?.geometry?.location?.lng() || 0,\r\n    };\r\n    settargetA(location);\r\n    setOrigin(null);\r\n    setDestination(null);\r\n    setResponse(null);\r\n    map?.panTo(location);\r\n  };\r\n\r\n  const onPlacesChangedB = () => {\r\n    const places = searchBoxB!.getPlaces();\r\n    console.log(places);\r\n    const place = places![0];\r\n    const location = {\r\n      lat: place?.geometry?.location?.lat() || 0,\r\n      lng: place?.geometry?.location?.lng() || 0,\r\n    };\r\n    settargetB(location);\r\n    setOrigin(null);\r\n    setDestination(null);\r\n    setResponse(null);\r\n    map?.panTo(location);\r\n  };\r\n\r\n  const traceRoute = () => {\r\n    if (targetA && targetB) {\r\n      setOrigin(targetA);\r\n      setDestination(targetB);\r\n    }\r\n  };\r\n\r\n  const directionsServiceOptions =\r\n    // @ts-ignore\r\n    useMemo<google.maps.DirectionsRequest>(() => {\r\n      return {\r\n        origin,\r\n        destination,\r\n        travelMode: \"DRIVING\",\r\n      };\r\n    }, [origin, destination]);\r\n\r\n  const directionsCallback = useCallback((res: any) => {\r\n    if (res !== null && res.status === \"OK\") {\r\n      setResponse(res);\r\n    } else {\r\n      console.log(res);\r\n    }\r\n  }, []);\r\n\r\n  const directionsRendererOptions = useMemo<any>(() => {\r\n    return {\r\n      directions: response,\r\n    };\r\n  }, [response]);\r\n\r\n  return (\r\n    <div className=\"w-full h-full\">\r\n      <LoadScript\r\n        googleMapsApiKey={\"AIzaSyDmyOn9q7XLenV8V4onkqT2tXlpYuadgjw\"}\r\n        libraries={[\"places\"]}\r\n      >\r\n        <GoogleMap\r\n          onLoad={onMapLoad}\r\n          mapContainerStyle={{ width: \"100%\", height: \"100%\" }}\r\n          center={position}\r\n          zoom={15}\r\n        >\r\n          <Card>\r\n            <CardContent>\r\n              <div className=\"grid w-full items-center gap-4\">\r\n                <StandaloneSearchBox\r\n                  onLoad={onLoadA}\r\n                  onPlacesChanged={onPlacesChangedA}\r\n                >\r\n                  <Input placeholder=\"Digite o endereço inicial\" />\r\n                </StandaloneSearchBox>\r\n                <StandaloneSearchBox\r\n                  onLoad={onLoadB}\r\n                  onPlacesChanged={onPlacesChangedB}\r\n                >\r\n                  <Input placeholder=\"Digite o endereço final\" />\r\n                </StandaloneSearchBox>\r\n              </div>\r\n              <CardFooter className=\"justify-end\">\r\n                <Button onClick={traceRoute}>Traçar rota</Button>\r\n              </CardFooter>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {!response && targetA && <Marker position={targetA} />}\r\n          {!response && targetB && <Marker position={targetB} />}\r\n\r\n          {origin && destination && (\r\n            <DirectionsService\r\n              options={directionsServiceOptions}\r\n              callback={directionsCallback}\r\n            />\r\n          )}\r\n\r\n          {response && directionsRendererOptions && (\r\n            <DirectionsRenderer options={directionsRendererOptions} />\r\n          )}\r\n        </GoogleMap>\r\n      </LoadScript>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Maps;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}